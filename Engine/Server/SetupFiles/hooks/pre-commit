#!/bin/sh
git diff --cached --name-only | \
grep -E "\.(cpp|hpp|h)$" | \
while read FILE
do
    if [ -f "$FILE" ]; then
        clang-format -i -style=file "$FILE" && git add "$FILE"
    fi
done
